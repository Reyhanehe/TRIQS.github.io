<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>

<title>/home/parcolle/triqs/src/triqs/triqs/gfs/meshes/matsubara_freq.hpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">/home/parcolle/triqs/src/triqs/triqs/gfs/meshes/matsubara_freq.hpp</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*******************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment"> *</span>
<a name="l00003"></a>00003 <span class="comment"> * TRIQS: a Toolbox for Research in Interacting Quantum Systems</span>
<a name="l00004"></a>00004 <span class="comment"> *</span>
<a name="l00005"></a>00005 <span class="comment"> * Copyright (C) 2013 by O. Parcollet</span>
<a name="l00006"></a>00006 <span class="comment"> *</span>
<a name="l00007"></a>00007 <span class="comment"> * TRIQS is free software: you can redistribute it and/or modify it under the</span>
<a name="l00008"></a>00008 <span class="comment"> * terms of the GNU General Public License as published by the Free Software</span>
<a name="l00009"></a>00009 <span class="comment"> * Foundation, either version 3 of the License, or (at your option) any later</span>
<a name="l00010"></a>00010 <span class="comment"> * version.</span>
<a name="l00011"></a>00011 <span class="comment"> *</span>
<a name="l00012"></a>00012 <span class="comment"> * TRIQS is distributed in the hope that it will be useful, but WITHOUT ANY</span>
<a name="l00013"></a>00013 <span class="comment"> * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS</span>
<a name="l00014"></a>00014 <span class="comment"> * FOR A PARTICULAR PURPOSE. See the GNU General Public License for more</span>
<a name="l00015"></a>00015 <span class="comment"> * details.</span>
<a name="l00016"></a>00016 <span class="comment"> *</span>
<a name="l00017"></a>00017 <span class="comment"> * You should have received a copy of the GNU General Public License along with</span>
<a name="l00018"></a>00018 <span class="comment"> * TRIQS. If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l00019"></a>00019 <span class="comment"> *</span>
<a name="l00020"></a>00020 <span class="comment"> ******************************************************************************/</span>
<a name="l00021"></a>00021 <span class="preprocessor">#pragma once</span>
<a name="l00022"></a>00022 <span class="preprocessor"></span><span class="preprocessor">#include &quot;./mesh_tools.hpp&quot;</span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &quot;../domains/matsubara.hpp&quot;</span>
<a name="l00024"></a>00024 
<a name="l00025"></a>00025 <span class="keyword">namespace </span>triqs {
<a name="l00026"></a>00026 <span class="keyword">namespace </span>gfs {
<a name="l00027"></a>00027 
<a name="l00028"></a><a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html">00028</a>  <span class="keyword">struct </span><a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html">matsubara_freq_mesh</a> {
<a name="l00029"></a>00029 
<a name="l00031"></a>00031   <span class="keyword">using</span> domain_t = <a class="code" href="structtriqs_1_1gfs_1_1matsubara__domain.html" title="The domain.">matsubara_domain&lt;true&gt;</a>;
<a name="l00033"></a>00033   <span class="keyword">using</span> index_t = long;
<a name="l00035"></a>00035   <span class="keyword">using</span> domain_pt_t = <span class="keyword">typename</span> domain_t::point_t;
<a name="l00036"></a>00036 
<a name="l00038"></a><a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#a8e7a8fe1e59d3239f7694a7358cba482">00038</a>   <a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#a8e7a8fe1e59d3239f7694a7358cba482" title="Constructor.">matsubara_freq_mesh</a>() : _dom(), _n_pts(0), _positive_only(true) {}
<a name="l00039"></a>00039 
<a name="l00041"></a><a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#aa99e96bae509406448e1a66acef19f42">00041</a>   <a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#a8e7a8fe1e59d3239f7694a7358cba482" title="Constructor.">matsubara_freq_mesh</a>(domain_t dom, <span class="keywordtype">int</span> n_pts=1025, <span class="keywordtype">bool</span> <a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#a37d468e7e9e674760d9ecc659f541a16" title="Is the mesh only for positive omega_n (G(tau) real))">positive_only</a> = <span class="keyword">true</span>)
<a name="l00042"></a>00042      : _dom(std::move(dom)), _n_pts(n_pts), _positive_only(<a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#a37d468e7e9e674760d9ecc659f541a16" title="Is the mesh only for positive omega_n (G(tau) real))">positive_only</a>) {}
<a name="l00043"></a>00043 
<a name="l00045"></a><a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#a280afbfd4a05b05f39c986c09f06a323">00045</a>   <a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#a8e7a8fe1e59d3239f7694a7358cba482" title="Constructor.">matsubara_freq_mesh</a>(<span class="keywordtype">double</span> beta, statistic_enum S, <span class="keywordtype">int</span> n_pts = 1025, <span class="keywordtype">bool</span> <a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#a37d468e7e9e674760d9ecc659f541a16" title="Is the mesh only for positive omega_n (G(tau) real))">positive_only</a> = <span class="keyword">true</span>)
<a name="l00046"></a>00046      : <a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html">matsubara_freq_mesh</a>({beta, S}, n_pts, <a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#a37d468e7e9e674760d9ecc659f541a16" title="Is the mesh only for positive omega_n (G(tau) real))">positive_only</a>) {}
<a name="l00047"></a>00047 
<a name="l00049"></a>00049   <a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#a8e7a8fe1e59d3239f7694a7358cba482" title="Constructor.">matsubara_freq_mesh</a>(<a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#a8e7a8fe1e59d3239f7694a7358cba482" title="Constructor.">matsubara_freq_mesh</a> <span class="keyword">const</span> &amp;) = <span class="keywordflow">default</span>;
<a name="l00050"></a>00050 
<a name="l00052"></a><a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#ac8761b7be6980de995bc0cf9ad92c6f7">00052</a>   domain_t <span class="keyword">const</span> &amp;<a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#ac8761b7be6980de995bc0cf9ad92c6f7" title="The corresponding domain.">domain</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> _dom; }
<a name="l00053"></a>00053 
<a name="l00062"></a>00062 
<a name="l00063"></a><a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#a66df6d8370c64cc4ab90c7c1d7372984">00063</a>   <span class="keywordtype">int</span> <a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#a66df6d8370c64cc4ab90c7c1d7372984" title="First value of the index.">last_index</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> (_positive_only ? _n_pts : (_n_pts - (_dom.statistic == Boson ? 1 : 2))/2);}
<a name="l00064"></a>00064 
<a name="l00066"></a><a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#a45ff531eff6085caac4bab65d0148d05">00066</a>   <span class="keywordtype">int</span> <a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#a45ff531eff6085caac4bab65d0148d05" title="first Matsubara index">first_index</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> -(_positive_only ? 0 : <a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#a66df6d8370c64cc4ab90c7c1d7372984" title="First value of the index.">last_index</a>() + (_dom.statistic == Fermion)); }
<a name="l00067"></a>00067 
<a name="l00069"></a><a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#add2f3539a856e4d459cd7d48e9f9b02d">00069</a>   <span class="keywordtype">long</span> <a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#add2f3539a856e4d459cd7d48e9f9b02d" title="Size (linear) of the mesh.">size</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> _n_pts;}
<a name="l00070"></a>00070 
<a name="l00072"></a><a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#a948117db82b45e36a38645e3bf65a263">00072</a>   domain_pt_t <a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#a948117db82b45e36a38645e3bf65a263" title="From an index of a point in the mesh, returns the corresponding point in the domain.">index_to_point</a>(index_t ind)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> 1_j * M_PI * (2 * ind + (_dom.statistic == Fermion)) / _dom.beta; }
<a name="l00073"></a>00073 
<a name="l00075"></a><a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#afd22bef88dbd0d8a6eaa9171caf3d0ed">00075</a>   <span class="keywordtype">long</span> <a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#afd22bef88dbd0d8a6eaa9171caf3d0ed" title="Flatten the index in the positive linear index for memory storage (almost trivial here)...">index_to_linear</a>(index_t ind)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> ind - <a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#a45ff531eff6085caac4bab65d0148d05" title="first Matsubara index">first_index</a>(); }
<a name="l00076"></a>00076   index_t linear_to_index(<span class="keywordtype">long</span> lind)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> lind + <a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#a45ff531eff6085caac4bab65d0148d05" title="first Matsubara index">first_index</a>(); }
<a name="l00077"></a>00077 
<a name="l00079"></a><a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#a37d468e7e9e674760d9ecc659f541a16">00079</a>   <span class="keywordtype">bool</span> <a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#a37d468e7e9e674760d9ecc659f541a16" title="Is the mesh only for positive omega_n (G(tau) real))">positive_only</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> _positive_only;}
<a name="l00080"></a>00080 
<a name="l00086"></a><a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh_1_1mesh__point__t.html">00086</a>   <span class="keyword">struct </span><a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh_1_1mesh__point__t.html">mesh_point_t</a> : tag::mesh_point, <a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq.html">matsubara_freq</a> {
<a name="l00087"></a>00087    <a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh_1_1mesh__point__t.html">mesh_point_t</a>() = <span class="keywordflow">default</span>;
<a name="l00088"></a>00088    <a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh_1_1mesh__point__t.html">mesh_point_t</a>(<a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html">matsubara_freq_mesh</a> <span class="keyword">const</span> &amp;mesh, index_t <span class="keyword">const</span> &amp;index_)
<a name="l00089"></a>00089       : <a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq.html">matsubara_freq</a>(index_, mesh.<a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#ac8761b7be6980de995bc0cf9ad92c6f7" title="The corresponding domain.">domain</a>().beta, mesh.<a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#ac8761b7be6980de995bc0cf9ad92c6f7" title="The corresponding domain.">domain</a>().statistic),
<a name="l00090"></a>00090         first_index(mesh.<a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#a45ff531eff6085caac4bab65d0148d05" title="first Matsubara index">first_index</a>()),
<a name="l00091"></a>00091         index_stop(mesh.<a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#a45ff531eff6085caac4bab65d0148d05" title="first Matsubara index">first_index</a>() + mesh.<a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#add2f3539a856e4d459cd7d48e9f9b02d" title="Size (linear) of the mesh.">size</a>() - 1) {}
<a name="l00092"></a>00092    <a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh_1_1mesh__point__t.html">mesh_point_t</a>(<a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html">matsubara_freq_mesh</a> <span class="keyword">const</span> &amp;mesh) : <a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh_1_1mesh__point__t.html">mesh_point_t</a>(mesh, mesh.<a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#a45ff531eff6085caac4bab65d0148d05" title="first Matsubara index">first_index</a>()) {}
<a name="l00093"></a>00093    <span class="keywordtype">void</span> advance() { ++n; }
<a name="l00094"></a>00094    <span class="keywordtype">long</span> linear_index()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> n - first_index; }
<a name="l00095"></a>00095    <span class="keywordtype">long</span> index()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> n; }
<a name="l00096"></a>00096    <span class="keywordtype">bool</span> at_end()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> (n == index_stop + 1); } <span class="comment">// at_end means &quot; one after the last one&quot;, as in STL</span>
<a name="l00097"></a>00097    <span class="keywordtype">void</span> reset() { n = first_index; }
<a name="l00098"></a>00098 
<a name="l00099"></a>00099    <span class="keyword">private</span>:
<a name="l00100"></a>00100    index_t first_index, index_stop;
<a name="l00101"></a>00101   };
<a name="l00102"></a>00102 
<a name="l00104"></a><a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#a70b332114f1c53489614f42b54146a7c">00104</a>   <a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh_1_1mesh__point__t.html">mesh_point_t</a> <a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#a70b332114f1c53489614f42b54146a7c" title="Accessing a point of the mesh from its index.">operator[]</a>(index_t i)<span class="keyword"> const </span>{
<a name="l00105"></a>00105    <span class="keywordflow">return</span> {*<span class="keyword">this</span>, i};
<a name="l00106"></a>00106   }
<a name="l00107"></a>00107 
<a name="l00109"></a>00109   <span class="keyword">using</span> const_iterator = mesh_pt_generator&lt;matsubara_freq_mesh&gt;;
<a name="l00110"></a>00110   const_iterator begin()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> const_iterator(<span class="keyword">this</span>); }
<a name="l00111"></a>00111   const_iterator end()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> const_iterator(<span class="keyword">this</span>, <span class="keyword">true</span>); }
<a name="l00112"></a>00112   const_iterator cbegin()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> const_iterator(<span class="keyword">this</span>); }
<a name="l00113"></a>00113   const_iterator cend()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> const_iterator(<span class="keyword">this</span>, <span class="keyword">true</span>); }
<a name="l00114"></a>00114 
<a name="l00115"></a>00115   <span class="keywordtype">bool</span> operator==(<a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#a8e7a8fe1e59d3239f7694a7358cba482" title="Constructor.">matsubara_freq_mesh</a> <span class="keyword">const</span> &amp;M)<span class="keyword"> const </span>{
<a name="l00116"></a>00116    <span class="keywordflow">return</span> (std::make_tuple(_dom, _n_pts, _positive_only) == std::make_tuple(M._dom, M._n_pts, M._positive_only));
<a name="l00117"></a>00117   }
<a name="l00118"></a>00118   <span class="keywordtype">bool</span> operator!=(<a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#a8e7a8fe1e59d3239f7694a7358cba482" title="Constructor.">matsubara_freq_mesh</a> <span class="keyword">const</span> &amp;M)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> !(operator==(M)); }
<a name="l00119"></a>00119 
<a name="l00121"></a><a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#a54191d9bf77388dd4855031ea72efcc7">00121</a>   <span class="keyword">friend</span> <span class="keywordtype">void</span> <a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#a54191d9bf77388dd4855031ea72efcc7" title="Write into HDF5.">h5_write</a>(<a class="code" href="classtriqs_1_1h5_1_1group.html" title="A local derivative of Group. Rational : use ADL for h5_read/h5_write, catch and rethrow exception...">h5::group</a> fg, std::string subgroup_name, <a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html">matsubara_freq_mesh</a> <span class="keyword">const</span> &amp;m) {
<a name="l00122"></a>00122    <a class="code" href="classtriqs_1_1h5_1_1group.html" title="A local derivative of Group. Rational : use ADL for h5_read/h5_write, catch and rethrow exception...">h5::group</a> gr = fg.<a class="code" href="classtriqs_1_1h5_1_1group.html#ac3e898d9eeba69545ab9a0bf73e114b8" title="Create a subgroup.">create_group</a>(subgroup_name);
<a name="l00123"></a>00123    <a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#a54191d9bf77388dd4855031ea72efcc7" title="Write into HDF5.">h5_write</a>(gr, <span class="stringliteral">&quot;domain&quot;</span>, m.<a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#ac8761b7be6980de995bc0cf9ad92c6f7" title="The corresponding domain.">domain</a>());
<a name="l00124"></a>00124    <a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#a54191d9bf77388dd4855031ea72efcc7" title="Write into HDF5.">h5_write</a>(gr, <span class="stringliteral">&quot;size&quot;</span>, m.<a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#add2f3539a856e4d459cd7d48e9f9b02d" title="Size (linear) of the mesh.">size</a>());
<a name="l00125"></a>00125    <span class="keywordflow">if</span> (m._positive_only) {
<a name="l00126"></a>00126     <span class="comment">// kept ONLY for backward compatibility of archives</span>
<a name="l00127"></a>00127     <span class="keyword">auto</span> beta = m.<a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#ac8761b7be6980de995bc0cf9ad92c6f7" title="The corresponding domain.">domain</a>().beta;
<a name="l00128"></a>00128     <a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#a54191d9bf77388dd4855031ea72efcc7" title="Write into HDF5.">h5_write</a>(gr, <span class="stringliteral">&quot;min&quot;</span>, Fermion ? M_PI / beta : 0);
<a name="l00129"></a>00129     <a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#a54191d9bf77388dd4855031ea72efcc7" title="Write into HDF5.">h5_write</a>(gr, <span class="stringliteral">&quot;max&quot;</span>, ((Fermion ? 1 : 0) + 2 * m.<a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#add2f3539a856e4d459cd7d48e9f9b02d" title="Size (linear) of the mesh.">size</a>()) * M_PI / beta);
<a name="l00130"></a>00130     <a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#a54191d9bf77388dd4855031ea72efcc7" title="Write into HDF5.">h5_write</a>(gr, <span class="stringliteral">&quot;kind&quot;</span>, 2);
<a name="l00131"></a>00131    } <span class="keywordflow">else</span> { <span class="comment">// A strange way : to preserve backward compatibility for old archive.</span>
<a name="l00132"></a>00132     <a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#a54191d9bf77388dd4855031ea72efcc7" title="Write into HDF5.">h5_write</a>(gr, <span class="stringliteral">&quot;start_at_0&quot;</span>, m._positive_only);
<a name="l00133"></a>00133    }
<a name="l00134"></a>00134   }
<a name="l00135"></a>00135 
<a name="l00137"></a><a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#a66789ced15cb360878764ac1df7304f7">00137</a>   <span class="keyword">friend</span> <span class="keywordtype">void</span> <a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#a66789ced15cb360878764ac1df7304f7" title="Read from HDF5.">h5_read</a>(<a class="code" href="classtriqs_1_1h5_1_1group.html" title="A local derivative of Group. Rational : use ADL for h5_read/h5_write, catch and rethrow exception...">h5::group</a> fg, std::string subgroup_name, <a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html">matsubara_freq_mesh</a> &amp;m) {
<a name="l00138"></a>00138    <a class="code" href="classtriqs_1_1h5_1_1group.html" title="A local derivative of Group. Rational : use ADL for h5_read/h5_write, catch and rethrow exception...">h5::group</a> gr = fg.<a class="code" href="classtriqs_1_1h5_1_1group.html#a984aa3fa6adf34c3e8140d907b4dd7ad" title="Open a subgroup. Throw it if does not exists.">open_group</a>(subgroup_name);
<a name="l00139"></a>00139    <span class="keyword">typename</span> matsubara_freq_mesh::domain_t dom;
<a name="l00140"></a>00140    <span class="keywordtype">int</span> L;
<a name="l00141"></a>00141    <span class="keywordtype">bool</span> s = <span class="keyword">true</span>;
<a name="l00142"></a>00142    <a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#a66789ced15cb360878764ac1df7304f7" title="Read from HDF5.">h5_read</a>(gr, <span class="stringliteral">&quot;domain&quot;</span>, dom);
<a name="l00143"></a>00143    <a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#a66789ced15cb360878764ac1df7304f7" title="Read from HDF5.">h5_read</a>(gr, <span class="stringliteral">&quot;size&quot;</span>, L);
<a name="l00144"></a>00144    <span class="keywordflow">if</span> (gr.has_key(<span class="stringliteral">&quot;start_at_0&quot;</span>)) <a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#a66789ced15cb360878764ac1df7304f7" title="Read from HDF5.">h5_read</a>(gr, <span class="stringliteral">&quot;start_at_0&quot;</span>, s);
<a name="l00145"></a>00145    m = <a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html">matsubara_freq_mesh</a>{std::move(dom), L, s};
<a name="l00146"></a>00146   }
<a name="l00147"></a>00147 
<a name="l00148"></a>00148   <span class="keyword">friend</span> <span class="keyword">class </span>boost::serialization::access;
<a name="l00150"></a><a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#a4016ee957e4d0c67081369c07f6dae9f">00150</a>   <span class="keyword">template</span> &lt;<span class="keyword">class</span> Archive&gt; <span class="keywordtype">void</span> <a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#a4016ee957e4d0c67081369c07f6dae9f" title="BOOST Serialization.">serialize</a>(Archive &amp;ar, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> version) {
<a name="l00151"></a>00151    ar &amp;TRIQS_MAKE_NVP(<span class="stringliteral">&quot;domain&quot;</span>, _dom);
<a name="l00152"></a>00152    ar &amp;TRIQS_MAKE_NVP(<span class="stringliteral">&quot;size&quot;</span>, _n_pts);
<a name="l00153"></a>00153    ar &amp;TRIQS_MAKE_NVP(<span class="stringliteral">&quot;kind&quot;</span>, _positive_only);
<a name="l00154"></a>00154   }
<a name="l00155"></a>00155 
<a name="l00157"></a><a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#a5a87b6eab2cd1000222b21f17a4e489c">00157</a>   <span class="keyword">friend</span> std::ostream &amp;<a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#a5a87b6eab2cd1000222b21f17a4e489c" title="Simple print (just blabla and the size)">operator&lt;&lt;</a>(std::ostream &amp;sout, <a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html">matsubara_freq_mesh</a> <span class="keyword">const</span> &amp;m) {
<a name="l00158"></a>00158    <span class="keywordflow">return</span> sout &lt;&lt; <span class="stringliteral">&quot;Matsubara Freq Mesh of size &quot;</span> &lt;&lt; m.<a class="code" href="structtriqs_1_1gfs_1_1matsubara__freq__mesh.html#add2f3539a856e4d459cd7d48e9f9b02d" title="Size (linear) of the mesh.">size</a>();
<a name="l00159"></a>00159   }
<a name="l00160"></a>00160 
<a name="l00161"></a>00161   <span class="keyword">private</span>:
<a name="l00162"></a>00162   domain_t _dom;
<a name="l00163"></a>00163   <span class="keywordtype">int</span> _n_pts;
<a name="l00164"></a>00164   <span class="keywordtype">bool</span> _positive_only;
<a name="l00165"></a>00165  };
<a name="l00166"></a>00166 
<a name="l00167"></a>00167  <span class="comment">//-------------------------------------------------------</span>
<a name="l00168"></a>00168 
<a name="l00176"></a>00176  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Lambda&gt; <span class="keywordtype">void</span> <span class="keywordflow">foreach</span>(matsubara_freq_mesh <span class="keyword">const</span> &amp;m, Lambda F) {
<a name="l00177"></a>00177   <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span> &amp;w : m) F(w);
<a name="l00178"></a>00178  }
<a name="l00179"></a>00179 }
<a name="l00180"></a>00180 }
<a name="l00181"></a>00181 
</pre></div></div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Wed Jul 23 2014 16:36:56 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
